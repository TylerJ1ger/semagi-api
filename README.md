# SEMagi API å®¢æˆ·ç«¯å·¥å…·åŒ…

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„SEMagi APIå®¢æˆ·ç«¯å·¥å…·åŒ…ï¼Œæä¾›äº†ç»Ÿä¸€çš„æ¥å£ä¸SEMagi APIäº¤äº’ï¼Œæ”¯æŒå…³é”®è¯åˆ†ç»„å’Œæœç´¢åŠŸèƒ½ã€‚

## â­ æ ¸å¿ƒç‰¹æ€§

### ğŸ Pythonå®¢æˆ·ç«¯
- ğŸš€ **åŠŸèƒ½å®Œæ•´**: æ”¯æŒæ‰€æœ‰APIåŠŸèƒ½
- â³ **æ™ºèƒ½ç­‰å¾…**: åŸºäºé¢„è®¡æ—¶é—´çš„åŠ¨æ€è½®è¯¢æœºåˆ¶
- ğŸ“Š **æ ¼å¼åŒ–è¾“å‡º**: ç¾è§‚çš„ç»“æœå±•ç¤º
- ğŸ”„ **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†

### ğŸŒ å…¨å¹³å°æ”¯æŒ
- **Unix/Linux/macOS**: ä½¿ç”¨Bashè„šæœ¬
- **Windows**: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
- **è·¨ç¯å¢ƒ**: Git Bashã€WSLç­‰ç¯å¢ƒ

### ğŸ“¦ ç³»ç»Ÿè¦æ±‚
- **Python 3.x**: å¿…éœ€
- **requestsåº“**: å¿…éœ€ (pip install requests)
- **è·¨å¹³å°**: æ”¯æŒUnix/Linux/macOS/Windows

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®APIå¯†é’¥

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp settings.example.json settings.json

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„APIå¯†é’¥
```

é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š
```json
{
  "api_key": "sk_your_api_key_here",
  "base_url": "http://localhost:8000",
  "task": {
    "function": "scrap-and-group",
    "file": "keywords.csv",
    "task_name": "my_task"
  },
  "defaults": {
    "grouper": "hierarchical_clustering",
    "min_similarity": 0.5,
    "range": 10,
    "country": "us",
    "language": "en",
    "numbers": 10,
    "force_group": true,
    "force_group_min_similarity": 0.2
  }
}
```

### 2. è¶…ç®€æ´ä½¿ç”¨

**é…ç½®ä¸€æ¬¡ï¼Œç»ˆèº«å—ç›Š**
```bash
# Unix/Linux/macOS
./semagi create-task

# Windows
semagi.bat create-task
```

**å¦‚éœ€è¦†ç›–ç‰¹å®šå‚æ•°**
```bash
# è¦†ç›–æ–‡ä»¶å’Œä»»åŠ¡å
./semagi -i custom.json -n "custom_task" create-task
```

ç»Ÿä¸€è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹Pythonç¯å¢ƒ
2. åŠ è½½é…ç½®æ–‡ä»¶
3. è°ƒç”¨Pythonå®¢æˆ·ç«¯
4. è¿”å›æ ¼å¼åŒ–çš„ç»“æœ

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### 1. é…ç½®æ–‡ä»¶è¯¦è§£

é…ç½®æ–‡ä»¶ `settings.json` æ”¯æŒä»¥ä¸‹é…ç½®é¡¹ï¼š

```json
{
  "api_key": "ä½ çš„APIå¯†é’¥",
  "base_url": "APIæœåŠ¡å™¨åœ°å€",
  "task": {
    "function": "group-only | scrap-and-group",
    "file": "é»˜è®¤æ–‡ä»¶è·¯å¾„",
    "task_name": "é»˜è®¤ä»»åŠ¡åç§°"
  },
  "defaults": {
    "grouper": "åˆ†ç»„ç®—æ³•",
    "min_similarity": 0.5,
    "range": 10,
    "country": "us",
    "language": "en", 
    "numbers": 10,
    "force_group": true,
    "force_group_min_similarity": 0.2
  },
  "timeout": {
    "request_timeout": 30,
    "max_wait_time": 1800
  },
  "display": {
    "show_debug": false,
    "show_progress": true
  }
}
```

### 2. è·å–APIå¯†é’¥

åœ¨SEMagiç½‘ç«™ä¸Šç”ŸæˆAPIå¯†é’¥ï¼š

1. ç™»å½•ä½ çš„SEMagiè´¦æˆ·
2. è¿›å…¥APIé¡µé¢ (`/api`)
3. ç”Ÿæˆæ–°çš„APIå¯†é’¥
4. å¤åˆ¶å¯†é’¥å¤‡ç”¨

### 3. åŸºæœ¬æ“ä½œ

#### ğŸ¯ è¶…ç®€æ´æ–¹å¼ï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºä»»åŠ¡ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‚æ•°ï¼‰
./semagi create-task

# æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
./semagi -t "task_id" check-status

# è·å–ä»»åŠ¡ç»“æœ
./semagi -t "task_id" get-results
```

#### âš™ï¸ å‚æ•°è¦†ç›–æ–¹å¼

```bash
# è¦†ç›–ç‰¹å®šå‚æ•°
./semagi -f scrap-and-group -i "custom.csv" -n "custom_task" create-task

# è¦†ç›–åŠŸèƒ½ç±»å‹
./semagi -f scrap-and-group create-task
```

#### ğŸ“‹ ä»»åŠ¡ç®¡ç†

```bash
# æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ
./semagi --check-env

# æ˜¾ç¤ºå®¢æˆ·ç«¯ä¿¡æ¯
./semagi --show-client create-task
```

#### ğŸ“ æ”¯æŒçš„åŠŸèƒ½ç±»å‹

**å…³é”®è¯åˆ†ç»„åŠŸèƒ½ (group-only)**
- é€‚ç”¨äºå·²æœ‰å…³é”®è¯æ•°æ®ï¼Œåªéœ€è¦è¿›è¡Œåˆ†ç»„
- **æ–‡ä»¶æ ¼å¼è¦æ±‚**: JSONæ–‡ä»¶

**æœç´¢+åˆ†ç»„åŠŸèƒ½ (scrap-and-group)**
- é€‚ç”¨äºéœ€è¦å…ˆæœç´¢ç›¸å…³å…³é”®è¯ï¼Œå†è¿›è¡Œåˆ†ç»„
- **æ–‡ä»¶æ ¼å¼è¦æ±‚**: CSV/TXTæ–‡ä»¶ï¼ŒåŒ…å«åŸºç¡€å…³é”®è¯

### 4. é«˜çº§å‚æ•°è®¾ç½®

å¯åœ¨é…ç½®æ–‡ä»¶ä¸­é¢„è®¾æ‰€æœ‰å‚æ•°ï¼Œæˆ–é€šè¿‡å‘½ä»¤è¡Œä¸´æ—¶è¦†ç›–ï¼š

```bash
# è¦†ç›–é«˜çº§å‚æ•°
./semagi --country us --language en --numbers 50 create-task
```

#### å‚æ•°è¯´æ˜

æ‰€æœ‰å‚æ•°éƒ½å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é¢„è®¾ï¼Œæ— éœ€æ¯æ¬¡è¾“å…¥ï¼š

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `api_key` | string | **å¿…éœ€** | APIå¯†é’¥ |
| `task.function` | string | `group-only` | åŠŸèƒ½ç±»å‹ |
| `task.file` | string | `keywords.json` | è¾“å…¥æ–‡ä»¶è·¯å¾„ |
| `task.task_name` | string | `my_task` | ä»»åŠ¡åç§° |
| `base_url` | string | `http://localhost:8000` | APIåŸºç¡€URL |
| `--grouper` | string | `hierarchical_clustering` | åˆ†ç»„ç®—æ³• (`hierarchical_clustering` æˆ– `jaccard`) |
| `--min-similarity` | float | `0.5` | æœ€å°ç›¸ä¼¼åº¦ (0.0-1.0) |
| `--range` | int | `10` | æœç´¢èŒƒå›´ (1-1000) |
| `--country` | string | `us` | æœç´¢å›½å®¶ä»£ç  |
| `--language` | string | `en` | æœç´¢è¯­è¨€ä»£ç  |
| `--numbers` | int | `10` | æœç´¢ç»“æœæ•°é‡ |
| `--no-wait` | flag | `false` | ä¸ç­‰å¾…ä»»åŠ¡å®Œæˆ |

### 4. æŸ¥è¯¢æ“ä½œ

#### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

```bash
python api_client.py \
  --api-key "your_api_key_here" \
  --check-status "task_id_here"
```

#### è·å–ä»»åŠ¡ç»“æœ

```bash
python api_client.py \
  --api-key "your_api_key_here" \
  --get-results "task_id_here"
```

## ğŸ“ æ–‡ä»¶æ ¼å¼è¦æ±‚

### group-only åŠŸèƒ½ (JSONæ ¼å¼)

**åŸºç¡€æ ¼å¼ï¼š**
```json
{
  "keywords": [
    "SEO tools",
    "keyword research", 
    "search engine optimization"
  ]
}
```

**åŒ…å«æ•°æ®çš„æ ¼å¼ï¼š**
```json
[
  {
    "keyword": "SEO tools",
    "search_volume": 1000,
    "competition": 0.5
  }
]
```

### scrap-and-group åŠŸèƒ½ (CSVæ ¼å¼)

**åŸºç¡€æ ¼å¼ï¼š**
```csv
keyword
SEO
marketing
analytics
```

**åŒ…å«åˆ†ç±»çš„æ ¼å¼ï¼š**
```csv
keyword,category
SEO,search
marketing,general
analytics,tools
```

### 3. ç¯å¢ƒä¾èµ–æ£€æŸ¥

ä½¿ç”¨ `--check-env` é€‰é¡¹æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒï¼š

```bash
./semagi --check-env
```

è¿™å°†æ£€æŸ¥ï¼š
- Python 3.x æ˜¯å¦å¯ç”¨
- requests åº“æ˜¯å¦å·²å®‰è£…
- æ˜¾ç¤ºè¯¦ç»†çš„ç¯å¢ƒä¿¡æ¯

## æ™ºèƒ½ç­‰å¾…æœºåˆ¶

å®¢æˆ·ç«¯åŒ…å«æ™ºèƒ½è½®è¯¢æœºåˆ¶ï¼Œæ ¹æ®é¢„è®¡æ—¶é—´åŠ¨æ€è°ƒæ•´æŸ¥è¯¢é—´éš”ï¼š

- **å‰50%æ—¶é—´**: è¾ƒé•¿é—´éš”è½®è¯¢ (5-30ç§’)
- **50%-80%æ—¶é—´**: ä¸­ç­‰é—´éš”è½®è¯¢ (3-15ç§’)  
- **80%+æ—¶é—´**: çŸ­é—´éš”è½®è¯¢ (2-10ç§’)
- **æ— é¢„è®¡æ—¶é—´**: æ¸è¿›å¼é—´éš” (5â†’10â†’15ç§’)

## è¾“å‡ºç¤ºä¾‹

```
ğŸš€ åˆ›å»ºä»»åŠ¡: my_grouping_task
   åŠŸèƒ½: group-only
   æ–‡ä»¶: keywords.json (1245 bytes)
âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸ!
   ä»»åŠ¡ID: 550e8400-e29b-41d4-a716-446655440000
   é¢„è®¡å®Œæˆæ—¶é—´: 120ç§’

â³ ç­‰å¾…ä»»åŠ¡å®Œæˆ: 550e8400-e29b-41d4-a716-446655440000
   é¢„è®¡ç­‰å¾…æ—¶é—´: 120ç§’
   [01] çŠ¶æ€: running (å·²ç­‰å¾… 5.0s) - é¢„è®¡å‰©ä½™: 115s
   [02] çŠ¶æ€: running (å·²ç­‰å¾… 25.0s) - é¢„è®¡å‰©ä½™: 95s
   [03] çŠ¶æ€: completed (å·²ç­‰å¾…  89.3s)
âœ… ä»»åŠ¡å®Œæˆ! (æ€»è€—æ—¶: 89.3s)

============================================================
ğŸ“Š ä»»åŠ¡ç»“æœ
============================================================
ä»»åŠ¡åç§°: my_grouping_task
å¤„ç†åŠŸèƒ½: group-only
å¤„ç†æ—¶é—´: 87.45ç§’
æ¶ˆè€—ç§¯åˆ†: 5
å¤„ç†å…³é”®è¯æ•°: 1500
åˆ›å»ºåˆ†ç»„æ•°: 25

ğŸ“ ä¸‹è½½é“¾æ¥:
  CSV: https://storage.googleapis.com/files/result.csv
  JSON: https://storage.googleapis.com/files/result.json

ğŸ” åˆ†ç»„é¢„è§ˆ (å‰3ä¸ªåˆ†ç»„):
  [1] group_1:
      ä¸»å…³é”®è¯: SEO tools
      å…³é”®è¯æ•°: 12
      ç¤ºä¾‹: SEO tools, search engine optimization tools, SEO software
      æœç´¢é‡: 1200
  [2] group_2:
      ä¸»å…³é”®è¯: keyword research
      å…³é”®è¯æ•°: 8
      ç¤ºä¾‹: keyword research, keyword analysis, keyword finder
      æœç´¢é‡: 800
  [3] group_3:
      ä¸»å…³é”®è¯: google analytics
      å…³é”®è¯æ•°: 15
      ç¤ºä¾‹: google analytics, web analytics, site analytics
      æœç´¢é‡: 2500
  ... è¿˜æœ‰ 22 ä¸ªåˆ†ç»„
============================================================

ğŸ‰ ä»»åŠ¡å®ŒæˆæˆåŠŸ!
```

## é”™è¯¯å¤„ç†

å®¢æˆ·ç«¯åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

- **æ–‡ä»¶é”™è¯¯**: è‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§å’Œæ ¼å¼
- **å‚æ•°éªŒè¯**: éªŒè¯å¿…éœ€å‚æ•°å’Œå‚æ•°èŒƒå›´
- **ç½‘ç»œé”™è¯¯**: è‡ªåŠ¨é‡è¯•å’Œå‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **APIé”™è¯¯**: è¯¦ç»†çš„é”™è¯¯ä»£ç å’Œè§£å†³å»ºè®®
- **ä¸­æ–­å¤„ç†**: ä¼˜é›…å¤„ç†Ctrl+Cä¸­æ–­

## å¸¸è§é—®é¢˜

### Q: æ”¯æŒå“ªäº›æ–‡ä»¶æ ¼å¼ï¼Ÿ

A: 
- `group-only`: ä»…æ”¯æŒ `.json` æ ¼å¼
- `scrap-and-group`: æ”¯æŒ `.csv` å’Œ `.txt` æ ¼å¼

### Q: ä»»åŠ¡éœ€è¦å¤šé•¿æ—¶é—´å®Œæˆï¼Ÿ

A: å¤„ç†æ—¶é—´å–å†³äºï¼š
- å…³é”®è¯æ•°é‡
- é€‰æ‹©çš„åŠŸèƒ½ (`scrap-and-group` é€šå¸¸éœ€è¦æ›´é•¿æ—¶é—´)
- æœç´¢å‚æ•° (æœç´¢æ•°é‡ã€èŒƒå›´ç­‰)
- æœåŠ¡å™¨è´Ÿè½½

é€šå¸¸ï¼š
- 100ä¸ªå…³é”®è¯çš„åˆ†ç»„ï¼š1-3åˆ†é’Ÿ
- 100ä¸ªå…³é”®è¯çš„æœç´¢+åˆ†ç»„ï¼š3-10åˆ†é’Ÿ

### Q: å¦‚ä½•æŸ¥çœ‹ä»»åŠ¡çš„è¯¦ç»†æ—¥å¿—ï¼Ÿ

A: å®¢æˆ·ç«¯ä¼šæ˜¾ç¤ºå®æ—¶çŠ¶æ€ï¼ŒåŒ…æ‹¬ï¼š
- ä»»åŠ¡åˆ›å»ºçŠ¶æ€
- é¢„è®¡å®Œæˆæ—¶é—´
- è½®è¯¢è¿›åº¦
- é”™è¯¯ä¿¡æ¯
- æœ€ç»ˆç»“æœ

### Q: å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡å—ï¼Ÿ

A: æ ¹æ®APIé™åˆ¶ï¼Œæ¯ä¸ªç”¨æˆ·åŒæ—¶åªèƒ½è¿è¡Œä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœå°è¯•åˆ›å»ºæ–°ä»»åŠ¡æ—¶æœ‰ä»»åŠ¡æ­£åœ¨è¿è¡Œï¼Œä¼šæ”¶åˆ°ç›¸åº”çš„é”™è¯¯æç¤ºã€‚

### Q: å¦‚ä½•å¤„ç†å¤§æ–‡ä»¶ï¼Ÿ

A: APIæœ‰æ–‡ä»¶å¤§å°é™åˆ¶ (10MB)ã€‚å¯¹äºå¤§æ–‡ä»¶ï¼Œå»ºè®®ï¼š
1. åˆ†å‰²æˆå¤šä¸ªå°æ–‡ä»¶
2. ä½¿ç”¨æ›´é«˜çš„ç›¸ä¼¼åº¦é˜ˆå€¼å‡å°‘å¤„ç†æ—¶é—´
3. åˆ†æ‰¹å¤„ç†å…³é”®è¯

## ğŸ“ æ–‡ä»¶æ¸…å•

```
client/
â”œâ”€â”€ â­ semagi                    # ç»Ÿä¸€å…¥å£è„šæœ¬ (Unix/Linux/macOS)
â”œâ”€â”€ â­ semagi.bat                # ç»Ÿä¸€å…¥å£è„šæœ¬ (Windows)
â”œâ”€â”€ ğŸ“„ README.md                # ä½¿ç”¨è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“‹ requirements.txt         # Pythonä¾èµ–
â”œâ”€â”€ âš™ï¸ settings.json            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“‹ settings.example.json    # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ ğŸ“„ keywords.json            # ç¤ºä¾‹å…³é”®è¯æ–‡ä»¶
â””â”€â”€ ğŸ“ scripts/                 # å…·ä½“å®ç°è„šæœ¬ç›®å½•
    â””â”€â”€ ğŸ api_client.py        # Python APIå®¢æˆ·ç«¯
```

### æ–‡ä»¶è¯´æ˜

- **ç»Ÿä¸€å…¥å£** (æ¨èä½¿ç”¨):
  - `semagi`: Unix/Linux/macOSç»Ÿä¸€å…¥å£è„šæœ¬
  - `semagi.bat`: Windowsç»Ÿä¸€å…¥å£è„šæœ¬
  - è‡ªåŠ¨æ£€æµ‹Pythonç¯å¢ƒï¼Œè°ƒç”¨Pythonå®¢æˆ·ç«¯

- **é…ç½®æ–‡ä»¶**:
  - `settings.json`: ä¸»é…ç½®æ–‡ä»¶ï¼ˆåŒ…å«APIå¯†é’¥ç­‰ï¼‰
  - `settings.example.json`: é…ç½®æ–‡ä»¶æ¨¡æ¿
  - `README.md`: å®Œæ•´çš„ä½¿ç”¨è¯´æ˜å’ŒAPIæ–‡æ¡£
  - `requirements.txt`: Pythonå®¢æˆ·ç«¯æ‰€éœ€çš„ä¾èµ–åŒ…

- **å…·ä½“å®ç°** (`scripts/`ç›®å½•):
  - `api_client.py`: Pythonå®¢æˆ·ç«¯å®ç°
  - ç”±ç»Ÿä¸€å…¥å£è„šæœ¬è‡ªåŠ¨è°ƒç”¨ï¼Œç”¨æˆ·æ— éœ€ç›´æ¥ä½¿ç”¨

## ğŸ› ï¸ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥Pythonç¯å¢ƒï¼š`./semagi --check-env`
2. æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®åœ¨settings.jsonä¸­
3. ç¡®è®¤æ–‡ä»¶æ ¼å¼ç¬¦åˆè¦æ±‚
4. æ£€æŸ¥ç½‘ç»œè¿æ¥
5. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç 
6. å‚è€ƒç›¸åº”çš„æ–‡æ¡£å’Œç¤ºä¾‹
7. è”ç³»æŠ€æœ¯æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

ç‰ˆæƒæ‰€æœ‰ Â© 2025 SEMagiã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
